<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>WSM API: WSM Topics</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Autodesk_logo_web.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">WSM API
   &#160;<span id="projectnumber">v23.0.0 (2023.0.0)</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="group__mod__wsm__api__ref.html"><span>WSM&#160;API&#160;Reference&#160;List</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Sample&#160;Code</span></a></li>
      <li><a href="http://help.autodesk.com/view/FORMIT/ENU/"><span>Autodesk&#160;FormIt&#160;Help</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('pg_wsm_topics.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">WSM Topics </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#s_wsm_topics_patch">WSM Topics </a><ul><li class="level2"><a href="#s_wsm_overview">Overview </a></li>
<li class="level2"><a href="#s_wsm_object_types">Object Types </a><ul><li class="level3"><a href="#s_wsm_topology_types">Topology Types</a></li>
<li class="level3"><a href="#s_wsm_other_types">Other Object Types</a></li>
<li class="level3"><a href="#s_wsm_functionality">WSM Functionality</a></li>
</ul>
</li>
<li class="level2"><a href="#s_wsm_supporting">Supporting Classes </a></li>
<li class="level2"><a href="#s_wsm_history_mgmt">History Management </a></li>
<li class="level2"><a href="#s_wsm_import_export">Importing and Exporting WSM Models </a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="s_wsm_topics_patch"></a>
WSM Topics </h1>
<h2><a class="anchor" id="s_wsm_overview"></a>
Overview </h2>
<p><a class="el" href="namespace_w_s_m.html">WSM</a> is a polyhedral geometric modeling kernel. It supports the following topology, similar to <a href="http://asmdoc/" title="ASM SDK Documentation">ASM (Autodesk Shape Manager)</a>:</p><ul>
<li><a class="el" href="pg_wsm_topics.html#Body">Body</a>, <a class="el" href="pg_wsm_topics.html#Lump">Lump</a>, <a class="el" href="pg_wsm_topics.html#Shell">Shell</a>, <a class="el" href="pg_wsm_topics.html#Face">Face</a>, <a class="el" href="pg_wsm_topics.html#Loop">Loop</a>, <a class="el" href="pg_wsm_topics.html#Coedge">Coedge</a>, <a class="el" href="pg_wsm_topics.html#Edge">Edge</a>, <a class="el" href="pg_wsm_topics.html#Vertex">Vertex</a></li>
</ul>
<p>In <a class="el" href="namespace_w_s_m.html">WSM</a>, <code>Edge</code>s are linear and <code>Face</code>s are planar. Smooth curves and surfaces are approximated.</p>
<h2><a class="anchor" id="s_wsm_object_types"></a>
Object Types </h2>
<p><code>Object</code> is the base class for all objects that support operations such as undo/redo, save/restore, etc. <br />
 <a class="el" href="pg_wsm_topics.html#s_wsm_other_types">Topology</a> and <a class="el" href="pg_wsm_topics.html#s_wsm_other_types">other</a> derived object types are not exposed directly in the <a class="el" href="namespace_w_s_m.html">WSM</a> public interface. Rather, object instances are manipulated by referencing their <em>Object IDs</em>.</p>
<h3><a class="anchor" id="s_wsm_topology_types"></a>
Topology Types</h3>
<p><a class="el" href="namespace_w_s_m.html">WSM</a> supports the following topology object types:</p>
<ul>
<li>__<a class="anchor" id="Vertex"></a><code>Vertex</code>:__ A point in space. Represented by a 3D point and vector of owning <code>Edge</code>s.</li>
<li>__<a class="anchor" id="Edge"></a><code>Edge</code>:__ A bounded line in space. Represented by one or two Vertices.</li>
<li>__<a class="anchor" id="Coedge"></a><code>Coedge</code>:__ Connects <code>Edge</code>s together into a <code>Loop</code>. Represented by an owning <code>Loop</code>, and pointers to an <code>Edge</code>, as well as previous, next, and partner <code>Coedge</code>s.</li>
<li>__<a class="anchor" id="Loop"></a><code>Loop</code>:__ The boundary of a <code>Face</code>. Represented by an owning <code>Face</code> and a pointer to the first <code>Coedge</code>.</li>
<li>__<a class="anchor" id="Face"></a><code>Face</code>:__ A bounded piece of a plane. Represented by one or more <code>Loop</code>s.</li>
<li>__<a class="anchor" id="Shell"></a><code>Shell</code>:__ A set of connected <code>Face</code>s. Represented by one or more <code>Face</code>s.</li>
<li>__<a class="anchor" id="Lump"></a><code>Lump</code>:__ A connected volume in space; could have zero volume, i.e. a sheet. Represented by one outer <code>Shell</code> and zero or more inner <code>Shell</code>s.</li>
<li>__<a class="anchor" id="Body"></a><code>Body</code>:__ A volume in space; could have zero volume, i.e. a sheet. Represented by spatially distinct <code>Lump</code>s.</li>
</ul>
<h3><a class="anchor" id="s_wsm_other_types"></a>
Other Object Types</h3>
<p><a class="el" href="namespace_w_s_m.html">WSM</a> also supports the supports the following object types:</p>
<ul>
<li>Material</li>
<li>Texture</li>
<li>Image</li>
<li>Satellite Data</li>
<li>Level - z height (Architecture)</li>
<li>Layer - visiblity control</li>
<li>SketchProperties (local coordinate system)</li>
<li>Attribute:<ul>
<li>Used to connect Objects to Materials, Levels, and Layers</li>
<li>Stores model properties, e.g. Edge style, Face UV data, Object properties (name, levels on/off)</li>
<li>Attributes migrate on split, copy, merge<ul>
<li>Behavior can be specified (like ASM)</li>
</ul>
</li>
<li>Used to identify circle and spline curves</li>
<li>Used to identify cylinder, sphere, and extrude surfaces.</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="s_wsm_functionality"></a>
WSM Functionality</h3>
<p><a class="el" href="namespace_w_s_m.html">WSM</a> supports:</p><ul>
<li>3D sketching</li>
<li>Drag Face</li>
<li>Move Object</li>
<li>Offset Face</li>
<li>Taper</li>
<li>Repair</li>
<li>Booleans:<ul>
<li>Unite</li>
<li>Subtract</li>
<li>Slice</li>
<li>Imprint</li>
</ul>
</li>
<li>Undo/redo</li>
<li>History based collaboration</li>
<li>Ray fire and frustum picking</li>
<li>Group</li>
<li>Array</li>
<li>Sweep</li>
<li>Cover</li>
<li>Loft</li>
<li>Offset/Shell</li>
<li>Blend</li>
<li>Transform including non-uniform scale and mirror</li>
<li>Validity testing</li>
</ul>
<h2><a class="anchor" id="s_wsm_supporting"></a>
Supporting Classes </h2>
<p>The <a class="el" href="namespace_w_s_m.html">WSM</a> API exposes the following supporting classes, data structures, constants and macros for:</p>
<ul>
<li>Representing basic geometry and mathematical concepts:<ul>
<li><a class="el" href="class_w_s_m_1_1_point2d.html" title="The Point2d class stores a point in 2D space. ">WSM::Point2d</a>, <a class="el" href="class_w_s_m_1_1_point3d.html" title="The Point3d class stores a point in 3D space. ">WSM::Point3d</a></li>
<li><a class="el" href="class_w_s_m_1_1_vector2d.html" title="The Vector2d class stores a vector in 2D space. ">WSM::Vector2d</a>, <a class="el" href="class_w_s_m_1_1_vector3d.html" title="The Vector3d class stores a vector in 3D space. ">WSM::Vector3d</a>, <a class="el" href="class_w_s_m_1_1_unit_vector3d.html" title="The UnitVector3d class stores a unit vector in 3D space. ">WSM::UnitVector3d</a></li>
<li><a class="el" href="class_w_s_m_1_1_line3d.html" title="The Line3d class stores an oriented line and/or an axis, defined by a Point3d and a Vector3d...">WSM::Line3d</a></li>
<li><a class="el" href="class_w_s_m_1_1_plane.html" title="The Plane class stores an oriented plane in 3D. ">WSM::Plane</a></li>
<li><a class="el" href="class_w_s_m_1_1_transf3d.html" title="The Transf3d class represents a general affine or projective transformation in 3D space...">WSM::Transf3d</a></li>
<li>various tolerances and constants (See <a class="el" href="_w_s_m___constants_8h.html">WSM_Constants.h</a>)</li>
</ul>
</li>
<li>Describing geometry:<ul>
<li><a class="el" href="struct_w_s_m_1_1_loop_data.html" title="Data used to construct a loop in a face. ">WSM::LoopData</a>, <a class="el" href="struct_w_s_m_1_1_face_data.html" title="Data used to construct a face. ">WSM::FaceData</a>, <a class="el" href="struct_w_s_m_1_1_edge_data.html" title="Data used to construct an edge. ">WSM::EdgeData</a>, <a class="el" href="struct_w_s_m_1_1_curve_data.html" title="Data used to construct a string of edges. ">WSM::CurveData</a>, <a class="el" href="struct_w_s_m_1_1_facets_body_data.html" title="Contains data for constructing a Body from facets. ">WSM::FacetsBodyData</a></li>
<li>various constants (See <a class="el" href="_w_s_m___constants_8h.html">WSM_Constants.h</a>)</li>
</ul>
</li>
<li>Describing materials:<ul>
<li><a class="el" href="class_w_s_m_1_1_color.html" title="The Color class stores an RGBA color value. ">WSM::Color</a></li>
<li><a class="el" href="struct_w_s_m_1_1_material_data.html" title="Data used to construct a material. ">WSM::MaterialData</a>, <a class="el" href="struct_w_s_m_1_1_texture_data.html" title="Data used to construct a texture. ">WSM::TextureData</a>, <a class="el" href="struct_w_s_m_1_1_image_data.html" title="Data used to construct a rectangular face with a texture on it. ">WSM::ImageData</a></li>
</ul>
</li>
<li>Managing models:<ul>
<li>Group and Instance Objects: <a class="el" href="group__mod__wsm__api__ref.html#gae8d1bf12a4f675d918f67e122218c71e" title="Supported object types. ">WSM::nObjectType</a>, <a class="el" href="class_w_s_m_1_1_object_history_i_d.html" title="The ObjectHistoryID class combines a history ID and an object ID into a single object. ">WSM::ObjectHistoryID</a>, <a class="el" href="class_w_s_m_1_1_group_instance_path.html" title="Private member m_aPaths in GroupInstancePath is not exported and causes a warning that can be safely ...">WSM::GroupInstancePath</a>, <a class="el" href="struct_w_s_m_1_1_instance_data.html" title="Data used to construct a group instance. ">WSM::InstanceData</a></li>
<li>Model attributes: <a class="el" href="struct_w_s_m_1_1_layer_data.html" title="Data used to construct a layer. ">WSM::LayerData</a></li>
<li>Change tracking: <a class="el" href="struct_w_s_m_1_1_model_change_data.html" title="The type of data passed to a callback that will be called upon the completion of each Delta or Undo/R...">WSM::ModelChangeData</a></li>
<li>various constants (See <a class="el" href="_w_s_m___constants_8h.html">WSM_Constants.h</a>)</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="s_wsm_history_mgmt"></a>
History Management </h2>
<p><a class="el" href="namespace_w_s_m.html">WSM</a> history management is implemented using 3 classes: <code>History</code>, which contains two vectors, namely <code>ObjectHistory</code>, and <code>Delta</code>.</p>
<p><code>History</code> is used to store undo and redo information, and provide history related facilities for the rest of <a class="el" href="namespace_w_s_m.html">WSM</a> code. Each Object has an ID that is unique in its History. <br />
 The Object ID is the index into the <code>ObjectHistory</code> vector. <br />
 The <code>Delta</code> vector contains a vector of IDs.</p>
<p>There may be several unrelated history streams (History instances), each maintaining model data unrelated to data in other history streams, i.e. all Object IDs, Delta timestamps, active Delta index, etc. are unique and make sense only within a given history stream. The data structure within a single history stream is illustrated by the following simplified diagram (some class variables are omitted for clarity):</p>
<div class="image">
<img src="History_diagram.png" alt="History_diagram.png"/>
<div class="caption">
Data structure within a single history stream</div></div>
<p> The actual objects, one instance per the Object version, are owned by an ObjectHistory instance corresponding to this Object: the size_t value returned by Object::GetID() can be used to access this Object's history via History::m_aObjectHistories in the given history stream. Note that to uniquely identify an Object, one needs two IDs: the History ID and Object ID within this history. Each Object's ObjectHistory contains all the versions of this Object, with the "live" version corresponding to the index (m_nCurrentIndexPlus1 - 1). The 0 value of m_nCurrentIndexPlus1 means that this ObjectHistory refers to the state before the Object has been created. If there are Redo states (i.e. there were one or more Undo executed on this Object and the Redo Delta-s were not yet discarded), then m_nCurrentIndexPlus1 is less than the size of m_aDeltaObjectVec and Redo operations are possible. In particular, the 0 index in an Object's ObjectHistory::m_aDeltaObjectVec is the Object at its time of creation, the larger indices correspond to changes to the Object, and the final index can be NULL meaning the Object has been deleted at that index's Delta.</p>
<p>Another important point, which permits safe use of Object pointers within <a class="el" href="namespace_w_s_m.html">WSM</a>, is that the pointer to the current state of an Object never changes after this object is first created. When the active version of an Object is rolled back (by Undo) or forward (Redo), the contents of the previous or next version of this object is swapped with the Object instance pointed by the never changing Object*, so, all other objects not affected by these changes still hold on to the same pointer. As a result, the validity of the model is maintained without the overhead of converting between persistent IDs and changing pointers, and the only overhead involved is Object data swapping during Undo/Redo.</p>
<h2><a class="anchor" id="s_wsm_import_export"></a>
Importing and Exporting WSM Models </h2>
<p>WSM supports serialization to the internal .wsm file format. It also supports the following formats:</p><ul>
<li>Import/Export STL and OBJ</li>
<li>Import AXM (FormIt)</li>
<li>Export SAT</li>
<li>Kernel support for import of:<ul>
<li>SKP (SketchUp)</li>
<li>Revit Families</li>
<li>SAT</li>
</ul>
</li>
<li>Support for RVT (Revit) Export</li>
</ul>
<p>![History_diagram.png]: (resources/History_diagram.png) "Data structure within a single history stream" </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
