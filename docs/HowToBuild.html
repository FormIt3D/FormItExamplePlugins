<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>Building FormIt Plugins</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css"/>
</head>
<body>
<h1 class="pageTitle">Building FormIt JavaScript Plugins</h1>
<h2 class="pageSubtitle">Learn How to Build, Test, and Host Your Own Plugins</h2>
<p class="pageBlurb">FormIt's JavaScript plugin infrastructure allows the creation of custom 3D workflows and bespoke modeling functionality, using a variety of UI types and a powerful API.</p>

<h3 class="categoryDetailTitle">Jump to (First time plugin developers)...</h3>
<ul class="categoryDetailList">
    <li><a href="#PluginPlayground">Your first plugin from the Plugin Playground</a></li>
</ul>

<h3 class="categoryDetailTitle">Jump to (Advanced users)...</h3>
<ul class="categoryDetailList">
    <li><a href="#SettingUpEnvironment">Setting Up Your Environment</a></li>
    <li><a href="#SettingUpFormIt">Setting Up FormIt</a></li>
    <li><a href="#WorkingWithSamplePlugins">Working With Sample Plugins</a></li>
    <li><a href="#GeneralPluginSetup">General Plugin Setup</a></li>
    <li><a href="#CreatingToolbarPlugin">Creating a Toolbar Plugin</a></li>
    <li><a href="#CreatingHTMLPanelPlugin">Creating an HTML Panel Plugin</a></li>
    <li><a href="#CreatingAddIn">Creating an Add-In</a></li>
    <li><a href="#SingleManifest">Creating Panel and Toolbar buttons in a single plugin</a></li>
    <li><a href="#VersioningPlugins">Versioning Plugins</a></li>
    <li><a href="#TestingPlugins">Testing Plugins</a></li>
    <li><a href="#DebuggingPlugins">Debugging Plugins</a></li>
    <li><a href="#HostingPlugins">Hosting Plugins</a></li>
    <li><a href="#PublishingPlugins">Publishing a plugin</a></li>
</ul>

<h3 class="categoryDetailTitle">Useful Links</h3>
<ul class="categoryDetailList">
    <li><a href="FormItJSAPI/group__mod__jsapi__formit.html" target="_blank">FormIt Core JS API</a></li>
    <li><a href="FormItJSAPI/group__mod__jsapi__wsm.html" target="_blank">FormIt Modeling Kernel (WSM) JS API</a></li>
    <li><a href="https://formit3d.github.io/FormItExamplePlugins/docs/FormItCPPAPI/index.html" target="_blank">FormIt Core C++ API</a></li>
    <li><a href="https://formit3d.github.io/FormItExamplePlugins/docs/FormItCPPAPI/group__mod__wsm__api__ref.html" target="_blank">FormIt Modeling Kernel C++ API</a></li>
    <li><a href="../index.html" target="_blank">Using Plugins + The Plugin Manager</a></li>
</ul>

<div class="categoryBlock" id="PluginPlayground">
    <h2 class="categoryTitle">Your first plugin from the Plugin Playground</h2>
    <div class="categoryDetailBlock">
        <p>
            If you're building your first FormIt plugin, the Plugin Playground is a great place to start. Write, test, debug, and view your plugin directly inside FormIt for Web or Windows, then publish instantly to GitHub for others to try. </p>
        <p>
            <a href="https://formit3d.github.io/PluginPlayground/" target="_blank">Learn how to use the Plugin Playground</a>
        </p>
        <img src="https://formit3d.github.io/PluginPlayground/images/preview.png" alt="Plugin Playground">
    </div>
</div>

<div class="categoryBlock" id="SettingUpEnvironment">
    <h2 class="categoryTitle">Setting Up Your Environment</h2>
    <div class="categoryDetailBlock">
        <p class="categoryDetailBody">Plugin development is supported in FormIt for Windows and FormIt for Web.</p>
        <h3 class="categoryDetailTitle">Get the Source Code</h3>
        <ul class="categoryDetailList">
            <li>You can clone various first-party FormIt plugin repos, which demonstrate different UI types and some advanced functionality that can be achieved with plugins.</li>
            <li>Each first-party plugin is now stored in its own repo. You'll find them all here:</li>
            <ul>
                <li><a href="https://github.com/FormIt3D" target="_blank">FormIt3D Organization Repos</a></li>
            </ul>
            <li>You can also download <a href="https://desktop.github.com/" target="_blank">GitHub Desktop</a>, which provides an easy-to-use interface for cloning repos, seeing changes to files, and pushing/pulling changes between your local computer and online repos.</li>
        </ul>
        <h3 class="categoryDetailTitle">Start a Web Server</h3>
        <p class="categoryDetailBody"><b>FormIt for Windows</b></p>
        <p class="categoryDetailBody">FormIt for Windows only requires a simple HTTP server to host plugins on a local web server.</p>
        <p class="categoryDetailBody">An HTTP server that works well is npm's <a href="https://www.npmjs.com/package/http-server" target="_blank">http-server</a>, which you can install by:</p>
        <ul class="categoryDetailList">
            <li>First, download and install <a href="https://nodejs.org/en/" target="_blank">NodeJS</a> if it's not already installed (one-time setup).</li>
            <ul>
                <li>If you encounter errors in the following steps, try restarting your computer for the NodeJS installation to complete.</li>
            </ul>
            <!--<li>In Windows, start a Command Prompt as an administrator:</li>
            <ul>
                <li>Start > type "cmd" > right-click <i>Command Prompt</i> > select <i>Run as Administrator</i></li>
            </ul>-->
            <!--<li>Mac</li>
            <ul>
                <li>Start a Terminal</i></li>
            </ul>-->
            <li>In the Command Prompt<!-- or Terminal-->, enter the following to install npm's <i>http-server</i> globally (one-time setup):</li>
            <ul>
                <li class="categoryDetailCode"><span>npm install http-server -g</span></li>
            </ul>
            <li>In Command Prompt, navigate to the directory containing the folders of repos you've cloned.</li>
            <li>Run the following:</li>
            <ul>
                <li class="categoryDetailCode"><span>http-server</span></li>
            </ul>
        </ul>
            <p class="categoryDetailBody"><b>Verify the Web Server</b></p>
                <ul class="categoryDetailList">
                    <li>In a web browser, navigate to the following:</li>
                        <ul>
                            <li class="categoryDetailCode"><span>http://localhost:8080/YourPluginFolder/manifest.json</span></li>
                        </ul>
                        <li>You should see a json object in the browser window.</li>
                        <li>If you use a different web server than npm, the default address/port might be different.</li>
                    </ul>
                </ul>
        </ul>
            <p class="categoryDetailBody"><b>FormIt for Web</b></p>
            <p class="categoryDetailBody">To develop on FormIt Web, simply run the following command instead:</p>
            <ul>
                <li class="categoryDetailCode"><span>http-server --cors</span></li>
            </ul>
            <p class="categoryDetailBody">You can verify the web server in the same way as outlined above for Windows.</p>

            <h3 class="categoryDetailTitle">Install an IDE</h3>
            <p class="categoryDetailBody">Write your code in an integrated development environment (IDE) that helps identify issues, correct syntax errors, and includes a terminal for running your local server.</p>
            <p class="categoryDetailBody">A free IDE that works well for FormIt plugin development is Microsoft's <a href="https://code.visualstudio.com/Download" target="_blank">Visual Studio Code</a>.</p>
            <p class="categoryDetailBody">Once installed:</p>
            <ul class="categoryDetailList">
                <li>File > Open Folder</li>
                <li>Select the folder that contains your plugin files and folders.</li>
            </ul>
            <p class="categoryDetailBody"><b>Optionally start your server from the IDE</b></p>
            <p class="categoryDetailBody">Now, you have the option of starting the server you installed previously right inside Visual Studio Code, instead of from a separate terminal window:</p>
            <ul class="categoryDetailList">
                    <li>View > Terminal (or shortcut Ctrl + `)</li>
                    <li>You should already be in the correct folder, so simply run the command to start your npm http-server from previous steps:</li>
                    <li class="categoryDetailCode"><span>http-server</span></li>
                    <li>You can confirm your server is running correctly by following the "Verify the Web Server" steps above.</li>
        </ul>
    </div>
</div>

<div class="categoryBlock" id="SettingUpFormIt">
        <h2 class="categoryTitle">Setting Up FormIt</h2>
        <div class="categoryDetailBlock">
            <p class="categoryDetailBody">In order to test and build plugins, you'll need FormIt for Window v17.0 or later.</p>
            <h3 class="categoryDetailTitle">Enable Development Windows</h3>
            <ul class="categoryDetailList">
                <li>Toggle the Script Editor and Script Output in FormIt for Windows:</li>
                <ul>
                    <li>Window menu > check <i>Script Editor</i> and <i>Script Output</i></li>
                    <li><img src="images/EnableDevelopmentWindows.PNG" class="imgList"></li>
                </ul>
            </ul>
            <p class="categoryDetailBody">Once toggled, the Script Editor and Script Output will appear at the bottom of the FormIt window.</p>
            <p class="categoryDetailBody">Switch between the Script Editor and Script Output by using the buttons at the bottom.</p>
            <img src="images/ScriptEditorDefaultState.PNG">
            <p class="categoryDetailBody">You can also get both panels to show up side-by-side by clicking the button next to the "x" in the upper right corner to detach one of the panels, then drag and drop the panels next to each other:</p>
            <img src="images/ScriptEditor+ScriptOutputConfiguration.gif" class="imgLarge">
            <ul class="categoryDetailList">
                    <li><b>Script Editor</b></li>
                    <ul>
                        <li>The Script Editor provides a simple development environment where you can write and test code.</li>
                        <li>The Script Editor stores written code inside a <span class="categoryDetailCode"><span>scratch.js</span></span> file in the directory where the FormIt exe is located.</li>
                        <li>At the top are two buttons:</li>
                        <ul>
                            <li><b>Run</b></li>
                            <ul>
                                <li>Executes all code written in the window.</li>
                            </ul>
                            <li><b>Run Selection</b></li>
                            <ul>
                                <li>Executes only the selected/highlighted lines of code.</li>
                            </ul>
                        </ul>
                    </ul>
                <li><b>Script Output</b></li>
                <ul>
                    <li>The Script Output window will display any messages printed to the console from plugins.</li>
                    <li>You can clear the output by running <span class="categoryDetailCode"><span>console.clear();</span></span> in the Script Editor.</li>
                </ul>
            </ul>
        </div>
    </div>

    <div class="categoryBlock" id="WorkingWithSamplePlugins">
        <h2 class="categoryTitle">Working With the Sample Plugins</h2>
        <div class="categoryDetailBlock">
                <p class="categoryDetailBody">If you've cloned the repositories and set up a web server from the <a href="#SettingUpEnvironment">previous steps</a>, you can now get the local plugins to show up in FormIt.</p>
                <p class="categoryDetailBody">You can load or install any of the plugins, but for the purposes of this exercise, you'll install both a panel-based and toolbar-based plugin. We'll assume your npm http-server is running on port 8080 hosting both example repositories.</p>
                <h3 class="categoryDetailTitle"><b>Load vs. Install:</b></h3>
                <ul class="categoryDetailList">
                        <li><span class="categoryDetailCode"><span>FormIt.LoadPlugin();</span></span> loads the plugin only for that session. It will be unloaded automatically when the app is closed and restarted.</li>
                        <ul>
                            <li>Great for temporarily manifesting a plugin for testing, for this session only.</li>
                        </ul>
                        <li><span class="categoryDetailCode"><span>FormIt.InstallPlugin();</span></span> makes the plugin persist between sessions using a registry key.</li>
                        <ul>
                            <li>Use <span class="categoryDetailCode"><span>FormIt.UninstallPlugin();</span></span> to uninstall.</li>
                            <li>Great for plugins you'll use frequently between sessions.</li>
                            <li>On Windows, the following registry keys are used to persist plugins:</li>
                            <ul>
                                <li>Plugins: <span class="categoryDetailCode"> <span>Computer\HKEY_CURRENT_USER\Software\Autodesk\FormIt 360\Plugins\InstalledPlugins</span></span>
                                </li>
                            </ul>
                        </ul>
                    <li>In the following examples, unless otherwise noted, feel free to use <i>Install</i> and <i>Load</i> interchangeably depending on whether you want the results of the exercise to be persistent or not.</li>
                </ul>
                <h3 class="categoryDetailTitle"><b>Toolbar Plugin Sample</b></h3>
                <ul class="categoryDetailList">
                    <li>In the Script Editor, run the following:</li>
                    <ul>
                        <li>If running a local server:</li>
                        <ul>
                            <li><span class="categoryDetailCode"> <span>FormIt.LoadPlugin("http://localhost:8080/FlipAlong");</span></span></li>
                        </ul>
                        <li>If loading from the <a href="https://github.com/FormIt3D/" target="_blank">FormIt Github repo</a> (requires an internet connection):</li>
                        <ul>
                            <li><span class="categoryDetailCode"> <span>FormIt.LoadPlugin("https://formit3d.github.io/FlipAlong");</span></span></li>
                        </ul>
                    </ul>
                    <li>You should see the Flip Along toolbar appear at the top of the application window:</li>
                    <li>
                        <img src="images/FlipAlongToolbar.PNG" class="imgList">
                    </li>
                </ul>
                <h3 class="categoryDetailTitle"><b>HTML Panel Plugin Sample</b></h3>
                <ul class="categoryDetailList">
                    <li>In the Script Editor, run the following:</li>
                    <ul>
                        <li>If running a local server:</li>
                        <ul>
                            <li><span class="categoryDetailCode"> <span>FormIt.LoadPlugin("http://localhost:8080/PropertiesPlus");</span></span></li>
                        </ul>
                        <li>If loading from the <a href="https://github.com/FormIt3D/" target="_blank">FormIt Github repo</a> (requires an internet connection):</li>
                        <ul>
                            <li><span class="categoryDetailCode"> <span>FormIt.LoadPlugin("https://formit3d.github.io/PropertiesPlus");</span></span></li>
                        </ul>
                    </ul>
                    <li>You should see the Properties Plus panel appear on the right side of the application window:</li>
                    <li>
                        <img src="images/PropertiesPlusPanel.png" class="imgList">
                    </li>
                </ul>
                <h3 class="categoryDetailTitle"><b>Modal + Modeless Dialog Plugin Sample</b></h3>
                <p class="categoryDetailBody">Dialog plugins are unique: they can only be loaded, not installed.</p>
                <ul class="categoryDetailList">
                    <li>In the Script Editor, run the following:</li>
                    <ul>
                        <li>If running a local server:</li>
                        <ul>
                            <li>Modal: <span class="categoryDetailCode"> <span>FormIt.LoadPlugin("http://localhost:8080/FormItExamplePlugins/ModalDialog");</span></span></li>
                            <li>Modeless: <span class="categoryDetailCode"> <span>FormIt.LoadPlugin("http://localhost:8080/FormItExamplePlugins/ModelessDialog");</span></span></li>
                        </ul>
                        <li>If loading from the <a href="https://github.com/FormIt3D/" target="_blank">FormIt Github repo</a> (requires an internet connection):</li>
                        <ul>
                            <li>Modal: <span class="categoryDetailCode"> <span>FormIt.LoadPlugin("https://formit3d.github.io/FormItExamplePlugins/ModalDialog");</span></span></li>
                            <li>Modal: <span class="categoryDetailCode"> <span>FormIt.LoadPlugin("https://formit3d.github.io/FormItExamplePlugins/ModelessDialog");</span></span></li>
                        </ul>
                    </ul>
                    <li>You should see the Hello Block! panel from the HTML Panel example appear on screen as either a modal or modeless dialog.</li>
                </ul>
            </div>
    </div>

    <div class="categoryBlock" id="GeneralPluginSetup">
        <h2 class="categoryTitle">General Plugin Setup</h2>
        <div class="categoryDetailBlock">
            <p class="categoryDetailBody">FormIt plugins are comprised of a key core component called a <i>manifest.json</i> file. The manifest file is a <a href="http://www.json.org/" target="_blank">JSON object</a> that tells the FormIt infrastructure what files to fetch and what kind of plugin to create.</p>
            <p class="categoryDetailBody">A <i>manifest.json</i> file has the following structure, but has additional properties depending on whether it's a toolbar or a panel-based plugin (see the following sections for more info):</p>
            <p class="categoryDetailCode">
                <pre>
{
    "PluginName": "[PluginName]",
    "PluginType": "[PluginType]"
    "PluginDescription": "[PluginDescription]",
    "Scripts": [
        "PLUGINLOCATION/[script1].js",
        "PLUGINLOCATION/[script2].js",
        ...
        "PLUGINLOCATION/[scriptn].js"
    ]
}               </pre>
            </p>
            <p class="categoryDetailBody">A typical plugin includes these JSON properties:</p>
            <ul class="categoryDetailList">
                <li>"PluginName" represents the name of the plugin for internal and most display purposes, including for the <a href="../index.html" target="_blank">Plugin Manager</a>.</li>
                <li>"PluginType" represents the type of the plugin, so users know what to look for when they install the plugin, and is used in the <a href="../index.html" target="_blank">Plugin Manager</a> description.</li>
                <li>"PluginDescription" is used by the <a href="../index.html" target="_blank">Plugin Manager</a> to communicate the plugin's capabilities before installing it.</li>
                <li>"Scripts" lists the required external scripts associated with the plugin that will be loaded into the FormIt application and can be executed when plugin functionality is invoked.</li>
            </ul>
            <p class="categoryDetailBody">Start your plugin development by creating a manifest.json file in your plugin folder. Next, you'll need to decide if you are making a toolbar or panel-based plugin.</p>
            <p class="categoryDetailBody"><b>Note:</b> the use of PLUGINLOCATION throughout the manifest.json file above is essential and also case sensitive. FormIt will replace PLUGINLOCATION with the server location for the plugin.</p>
    </div>
</div>

<div class="categoryBlock" id="CreatingToolbarPlugin">
        <h2 class="categoryTitle">Creating a Toolbar Plugin</h2>
        <div class="categoryDetailBlock">
            <p class="categoryDetailBody">A toolbar-based plugin has a <i>manifest.json</i> file with the following structure:</p>
            <p class="categoryDetailCode">
                <pre>
{
    "PluginName": "Flip Along",
    "PluginType": "Toolbar",
    "PluginDescription": "Creates a toolbar with X, Y, and Z buttons to quickly flip selected geometry in the direction of the selected axis.",
    "ToolbarURL": "PLUGINLOCATION/toolbar.json",
    "Scripts": [
        "PLUGINLOCATION/flipalong.js"
    ]
}               </pre>
            </p>
            <p class="categoryDetailBody">In addition to the <a href="#GeneralPluginSetup">standard JSON properties</a>, a toolbar-based plugin includes these special JSON properties:</p>
            <ul class="categoryDetailList">
                <li>"ToolbarURL" tells FormIt that this plugin is a toolbar, and links to the location of another JSON file that describes the toolbar's functionality.</li>
            </ul>
            <p class="categoryDetailBody">After creating a manifest file like the one described above, you'll need to create the <i>toolbar.json</i> file which defines the toolbar buttons, their names, text, icons, and the onClick function assigned to each button. The toolbar's JSON file will have the following format:</p>
            <p class="categoryDetailCode">
                <pre>
{
    "name": "Flip Along Toolbar",
    "buttons": [
        {
            "name": "Flip Along X",
            "command": "FlipAlongPlugin.ButtonX",
            "iconText": "X",
            "iconURL": "[Icon URL]"
        },
        {
            "name": "Flip Along Y",
            "command": "FlipAlongPlugin.ButtonY",
            "iconText": "Y",
            "iconURL": "[Icon URL]"
        },
        {
            "name": "Flip Along Z",
            "command": "FlipAlongPlugin.ButtonZ",
            "iconText": "Z",
            "iconURL": "[Icon URL]"
        }
    ]
}               </pre>
            </p>
            <p class="categoryDetailBody">The <i>toolbar.json</i> file includes these JSON properties:</p>
            <ul class="categoryDetailList">
                <li>"name" represents the name of the overall toolbar, and is used internally to associate all the buttons to the single toolbar menu.</li>
                <li>"buttons" represent individual buttons added inside of the toolbar. A toolbar can have any number of buttons.</li>
                <ul>
                    <li>"name" is used to define the button's internal name which is used to associate the button to the toolbar, as well as to the button's onClick function.</li>
                    <li>"command" is used to define the function of the button, which can come in one of two forms: a JavaScript function (which can be defined in a script contained in the <i>manifest.json</i> "Scripts" field), or a FormIt Command i.e. "Draw: Circle". You can obtain a list of FormIt commands by running the Messages plugin.</li>
                    <li>"iconText" is used to set the tooltip and description text in the button. If an icon URL is not provided, the text will create an auto-generated icon of formatted text.</li>
                    <li>"iconURL" can be set to use a custom icon for the button.</li>
                </ul>
            </ul>
            <p class="categoryDetailBody">After the buttons have all been defined in the <i>toolbar.json</i> file, the plugin is ready to go. If there are any additional JavaScript functions you would like to define, add them to the same folder as the <i>manifest.json</i> file and be sure to add the file reference to the "Scripts" field of the manifest file as well so that FormIt can find the files.</p>
    </div>
</div>

<div class="categoryBlock" id="CreatingHTMLPanelPlugin">
        <h2 class="categoryTitle">Creating an HTML Panel Plugin</h2>
        <div class="categoryDetailBlock">
            <p class="categoryDetailBody">A panel-based plugin that displays an HTML page has a <i>manifest.json</i> file with the following structure:</p>
            <p class="categoryDetailCode">
                <pre>
{
    "PluginName": "Hello Block!",
    "PluginType": "Panel",
    "PluginDescription": "Creates a panel with an HTML form that allows dimensional input for a 3D block which will get generated at the world origin.",
    "Scripts": [
        "PLUGINLOCATION/block.js"
    ],
    "Panel": "PLUGINLOCATION/hello_block.html",
    "PanelIcon": "PLUGINLOCATION/hello_block.png"
}               </pre>
            </p>
            <p class="categoryDetailBody">In addition to the <a href="#GeneralPluginSetup">standard JSON properties</a>, a panel-based plugin includes these special JSON properties:</p>
            <ul class="categoryDetailList">
                <li>"Panel" tells FormIt that this plugin is a panel, and links to the location of the HTML file that should be loaded in the panel.</li>
                <ul>
                    <li>The HTML file will need links in the header to the appropriate JavaScript files, as well as to a CSS file for styling.</li>
                    <li>The HTML file will render in the FormIt panel as it would in a browser.</li>
                    <li>You can see examples of rich HTML interfaces in our <a href="https://github.com/FormIt3D/" target="_blank">FormIt3D organization</a>.</li>
                </ul>
                <li>"PanelIcon" defines an icon to appear in the tab for this panel on the right side of the application. If undefined, FormIt creates an automatic icon using the initials from the name of the plugin.</li>
            </ul>
            <p class="categoryDetailBody">Once your HTML, CSS, and JavScript files are set up, you can begin testing your HTML panel plugin by loading it or installing it.</p>
    </div>
</div>

<div class="categoryBlock" id="CreatingAddIn">
    <h2 class="categoryTitle">Creating an Add-In</h2>
    <div class="categoryDetailBlock">
        <p class="categoryDetailBody">An Add-In is a plugin that also loads DLLs that expose new JavaScript APIs.  To build DLLs that support FormIt, the FormIt API is
            needed.  The FormIt API can be downloaded from the <a href="https://www.autodesk.com/developer-network/overview" target="_blank">Autdesk Developers Network</a>.
            A login is needed to access the download.  Once logged in, the FormIt API is available under SOFTWARE.
        </p>
        <img src="images/FormItAPIMenuItem.jpg" class="imgLarge">        
        <img src="images/FormItAPIDownload.jpg" class="imgLarge">
        <p>An Add-In has access to the <a href="https://formit3d.github.io/FormItExamplePlugins/docs/FormItCPPAPI/index.html" target="_blank">FormIt API</a> and <a href="https://formit3d.github.io/FormItExamplePlugins/docs/FormItCPPAPI/group__mod__wsm__api__ref.html" target="_blank">FormIt Modeling Kernel C++ API</a>.</p>
        <p>An add-in has the following structure-</p>
        <pre>
            // FormIt looks for REGISTERAPIMETHODS to load new JS APIs
            REGISTERAPIMETHODS
            {
                // Declare new namespace for the new JS APIs
                REGISTERNAMESPACE("HelloDLL")
                // Create a JS API with no arguments
                APIMETHOD(HelloDLL, API1, "") {}
                // Create a JS API with 1 argument
                APIMETHOD(HelloDLL, API2, "arg1") {}
                // Create a JS API with 2 argument
                APIMETHOD(HelloDLL, API3, "arg1, arg2") {}
                ...
                ...
            }
        </pre>
        <p>To get the arguements into C++ variables use SCRIPTCONVERTER-</p>
        <pre>
            // Create a JS API with 2 argument
            APIMETHOD(HelloDLL, API3, "arg1, arg2")
            {
                // NOTE: The arg names above ^^^^ have to match the args in the macros below.
                // arg1 expects a bool
                SCRIPTCONVERTER(bool, arg1);
                // arg2 expects an int
                SCRIPTCONVERTER(int, arg2);
                return JSON_UNDEFINED;
            }
        </pre>
        <p>Either JSON_UNDEFINED or any json object can be returned.  Use to_json to convert your C++ variable to json-</p>
        <pre>
            // Create a JS API with 2 argument
            APIMETHOD(HelloDLL, API3, "arg1, arg2")
            {
                // NOTE: The arg names above ^^^^ have to match the args in the macros below.
                // arg1 expects a bool
                SCRIPTCONVERTER(bool, arg1);
                // arg2 expects an int
                SCRIPTCONVERTER(int, arg2);

                std::string myValue = "Test";
                return to_json(myValue);
            }
        </pre>
        <p>Once the DLL is defining all the needed JS APIs, the plugin must tell FormIt what DLLs need loaded.  This is done in the <a href="https://github.com/FormIt3D/HelloAddIn/blob/main/v22_0/manifest.json#L8" target="_blank">manifest</a>.</p>
        <pre>
        "DLLs" : ["PLUGINLOCATION/MyClass.dll", "PLUGINLOCATION/HelloDLL.dll"]
        </pre>

        <p class="categoryDetailBody"><a href="https://github.com/FormIt3D/HelloAddIn" target="_blank">HelloAddIn</a> is a working example that explains how to make an Add-In.</p>
        <p class="categoryDetailBody"><a href="https://github.com/FormIt3D/HelloWSMAddIn" target="_blank">HelloWSMAddIn</a> is a working example that explains how to make an Add-In with the <a href="https://formit3d.github.io/FormItExamplePlugins/docs/FormItCPPAPI/group__mod__wsm__api__ref.html" target="_blank">FormIt Modeling Kernel C++ API</a>.</p>
</div>
</div>

<div class="categoryBlock" id="SingleManifest">
    <h2 class="categoryTitle">Creating a Combined HTML Panel and Toolbar with One Manifest</h2>
    <div class="categoryDetailBlock">
        <p class="categoryDetailBody">With a single <i>manifest.json</i>, you can initialize both a toolbar and an HTML panel, offering a variety of UI types and tools, all loaded from the same directory.</p>
        <pre>
    {
        "PluginName": "Name...",
        "PluginDescription": "Description...",
        "ToolbarEntry": "index.html", <-- This is the "main entry" used to load/define all code used by your toolbar buttons
        "ToolbarButtons": [ <-- Contains an entry for each toolbar button
            {
                "iconText": "TB",
                "iconURL": "circle.png",
                "command": "window.AlertFormItVersion" <-- Javascript that will run in the document defined by ToolbarEntry
            },
            {
                "iconText": "CB",
                "iconURL": "block.png",
                "command": "window.CreateBlock"
            }
        ],
        "Panel": "panel.html", <-- Panel entry point
        "PanelIcon": "block.png" <-- Icon for your panel button
    }
        </pre>
    </div>
</div>

<div class="categoryBlock" id="VersioningPlugins">
    <h2 class="categoryTitle">Versioning Plugins</h2>
    <div class="categoryDetailBlock">
        <p class="categoryDetailBody">As you develop and update your plugin, at some point, you may need to version the code. </p>
        <p class="categoryDetailBody">For example, FormIt's APIs may change between releases, and while you may want the new version of your plugin to use new FormIt or WSM APIs, you'd also like to keep the plugin working in older clients.</p>
        <p class="categoryDetailBody">Starting with FormIt <b>v18.0</b>, you can implement versioning for your plugin in 3 simple steps:</p>
        <ul class="categoryDetailList">
            <li>Add a <i>versions.json</i> file to the root of your plugin directory</li>
            <li>Specify each compatible FormIt version, and the directory containing those plugin files, in <i>versions.json</i></li>
            <ul>
                <li>Use the FormIt internal version number, or "Build Number", found in FormIt under Info > About.</li>
            </ul>
            <li>Organize your plugin files and directories to match <i>versions.json</i></li>
        </ul>
        <p class="categoryDetailBody">Your <i>versions.json</i> should look like this:</p>
        <p class="categoryDetailCode">
        <pre>
        [
            {
                "version":{
                    "major":18,
                    "minor":0
                },
                "path":"v18_0"
            },
            {
                "version":{
                    "major":19,
                    "minor":1
                },
                "path":"v19_0"
            }
        ]
        </pre>
        </p>

        <p></p>

        <p class="categoryDetailBody">The above paths <i>v18_0</i> and <i>v19_0</i> must be valid subpaths from the root of your directory/repository. </p>

        <p class="categoryDetailBody">A great way to handle this is to move your plugin code into subdirectories. Using the above <i>versions.json</i>, a directory structure would look like this:</p>
            <ul>
                <li><b>versions.json</b> (file)</li>
                <li><b>v18_0</b> (directory)</li>
                <ul>
                    <li><b>manifest.json</b> (file)</li>
                    <li><b>plugin.html</b> (file)</li>
                    <li><b>plugin.js</b> (file)</li>
                </ul>
                <li><b>v19_0</b> (directory)</li>
                <ul>
                    <li><b>manifest.json</b> (file)</li>
                    <li><b>plugin.html</b> (file)</li>
                    <li><b>plugin.js</b> (file)</li>
                </ul>
            </ul>
        </ul>

        <p class="categoryDetailBody">Optional properties on version are "exactVersion" and "lastVersion".  "exactVersion" indicates the version has to match FormIt's version exactly.  "lastVersion" indicates the last version allowed to run in FormIt.
            <pre>
                [
                    {
                        "version":{
                            "major":18,
                            "minor":0,
                            "exactVersion":true
                        },
                        "path":"v18_0"
                    },
                    {
                        "version":{
                            "major":19,
                            "minor":1,
                            "lastVersion":true
                        },
                        "path":"v19_0"
                    }
                ]
                </pre>            
        </p>

        <p class="categoryDetailBody">It's also possible to use git branches/tags/commits for your paths.</p>

        <p class="categoryDetailBody">If you're working with a pre-release or beta build of FormIt, and would like to test changes to a plugin that only works with the pre-release version:</p>

        <ul class="categoryDetailList">
            <li>Follow the steps above, except using the filename <i>versions_prerelease.json</i></li>
            <li>If you commit <i>versions_prerelease</i> to your repo, you'll want to remove it when that pre-release version of FormIt is released</li>
            <ul>
                <li>Otherwise, future pre-release FormIt versions will be loading the plugin from a location that could be stale or intended for an older version</li>
            </ul>
        </ul>

    </div>
</div>


<div class="categoryBlock" id="TestingPlugins">
    <h2 class="categoryTitle">Testing Plugins</h2>
    <div class="categoryDetailBlock">
        <p class="categoryDetailBody">If your web server is running <a href="#SettingUpEnvironment">per the instructions above</a>, you can test your in-progress plugins easily using the built-in <a href="#SettingUpFormIt">Script Editor</a> in FormIt for Windows:</p>
        <p class="categoryDetailBody">We recommend using <span class="categoryDetailCode"><span>FormIt.LoadPlugin("URL");</span></span> when testing, which loads plugins temporarily for this session (they will disappear when FormIt is restarted). Once testing is complete, you can persist the plugin between sessions using <span class="categoryDetailCode"><span>FormIt.InstallPlugin("URL");</span></span>.</p>
        <ul class="categoryDetailList">
                <li><b>FormIt for Windows v17 and newer</b></li>
                <ul>
                    <li><b>Toolbar Plugins</b></li>
                    <ul>
                        <li>Load your plugin into FormIt to see the latest UI and test the latest functionality:</li>
                        <ul>
                            <li class="categoryDetailCode"><span>FormIt.LoadPlugin("http://localhost:8080/YourPluginName");</span></li>
                        </ul>
                        <li>Make some changes, then load the plugin again using the command above.</li>
                        <ul>
                            <li>You can load many instances of the same plugin in the current session as you test, each with its own UI.</li>
                            <li>Be sure to use the latest UI instance to ensure you're testing your most recent changes.</li>
                        </ul>
                    </ul>
                    <li><b>HTML Panel Plugins</b></li>
                    <ul>
                        <li>Load your plugin into FormIt to see the latest UI and test the latest functionality:</li>
                        <ul>
                            <li class="categoryDetailCode"><span>FormIt.LoadPlugin("http://localhost:8080/YourPluginName");</span></li>
                        </ul>
                        <li>Make some changes, then simply right-click the panel and select "Hard Reload" to reload the panel with the latest HTML, CSS, and scripts.</li>
                    </ul>
                </ul>
            </ul>
            <p class="categoryDetailBody"><b>Previewing Your Plugin with the Plugin Manager</b></p>
            <p class="categoryDetailBody">To preview how your plugin would appear in the Plugin Manager (updated title, description, etc) before it's pushed to GitHub, you can paste the localhost URL into the box at the bottom of the Plugin Manager:</p>
            <img src="images/PluginManagerInstallLocal.png" class="imgList">
            <p class="categoryDetailBody">Then look for your plugin in the Installed section at the top:</p>
            <img src="images/PluginManagerInstalledList.png" class="imgList">
            <p class="categoryDetailBody"><b>Force Clearing the Web Cache for .JSON Files</b></p>
            <p class="categoryDetailBody">If you modify the title or description inside the manifest.json file for a plugin or repo, you may need to force clear the cache in FormIt for Windows to see those changes take effect the next time you reload the Plugin Manager.</p>
            <p class="categoryDetailBody">FormIt for Windows stores its web cache here:</p>
            <ul class="categoryDetailList">
                <li class="categoryDetailCode"><span>C:\Users\user\AppData\Local\Autodesk\FormIt 360\QtWebEngine\Default</span></li>
                <li>You'll need to enable hidden items in Windows Explorer to see the AppData folder.</li>
            </ul>
            <p class="categoryDetailBody">To delete the web cache, simply delete the "Default" folder above, then reload the Plugin Manager to see the updated titles and descriptions.</p>
    </div>
</div>

<div class="categoryBlock" id="DebuggingPlugins">
    <h2 class="categoryTitle">Debugging Plugins</h2>
    <div class="categoryDetailBlock">
        <p class="categoryDetailBody">FormIt plugins utilize two distinct JavaScript engines: one in the panel displaying the HTML, and another engine in the FormIt client, which can make calls to FormIt and its geometry kernel. These JavaScript engines are in two different processes.</p>

        <p class="categoryDetailBody"><b>Client-Side (FormIt) Debugging</b></p>
        <p class="categoryDetailBody">To debug in FormIt-side code, which applies to both toolbar- and panel-based plugins, you can add a line in the code to pop the desktop application's built-in JS debugger:</p>
        <ul class="categoryDetailList">
            <li class="categoryDetailCode"><span>debugger;</span></li>
        </ul>
        <p class="categoryDetailBody"><b>Web-Side (HTML) Debugging</b></p>
        <p class="categoryDetailBody">Panel-based FormIt plugins offer HTML-based UI debugging, since the panels are fundamentally HTML websites with styling and scripts.</p>
        <p class="categoryDetailBody">To debug HTML-side code for plugins built into a panel, including scripts and styling:</p>
        <ul class="categoryDetailList">
            <li><b>FormIt for Windows 2021.1 and newer</b></li>
            <ul>
                <li>Right-click on the plugin HTML page and click "Debug" to display the application's built-in HTML debugger.</li>
            </ul>
            <li><b>FormIt for Web</b></li>
            <ul>
                <li>Use shortcut F12, or Ctrl + Shift+ I, to pull up the browser's HTML debugger.</li>
            </ul>
    </div>
</div>


<div class="categoryBlock" id="HostingPlugins">
        <h2 class="categoryTitle">Hosting Plugins</h2>
        <div class="categoryDetailBlock">
            <p class="categoryDetailBody">Built a useful plugin that you want to share? Host your repository on GitHub so others can install your plugins from the <a href="../index.html" target="_blank">Plugin Manager</a>!</p>
            <p class="categoryDetailBody"><b>Hosting Your Repo + Plugins on GitHub</b></p>
            <ul class="categoryDetailList">
                <li>Sign up for a free <a href="https://github.com/join" target="_blank">GitHub account</a>.</li>
                <li>Download <a href="https://desktop.github.com/" target="_blank">GitHub Desktop</a>, a free tool for cloning repos, seeing changes to files, and pushing/pulling changes between your local computer and online repositories.</li>
                <li>Create a new repo to host your plugin on GitHub.</li>
                <li>Use GitHub Desktop to clone your new (empty) GitHub repository to your local machine.</li>
                <li>Develop your plugin by adding new files to the repo folder locally.</li>
                <li>Use GitHub Desktop to push your plugin files and directories to your repository.</li>
                <li>Enable GitHub Pages in your repository so FormIt can load and display your GitHub-hosted plugins.</li>
                <ul>
                    <li>Go to your new GitHub plugins repo, i.e. <span class=categoryDetailCode>https://github.com/Joe/JoesPlugins</span></li>
                    <li>In the top-right corner, click the Settings tab.</li>
                    <li>Scroll down to the GitHub Pages section, enable GitHub Pages, and use the <i>master</i> branch.</li>
                </ul>
            </ul>
            <p class="categoryDetailBody">At this point, you can continue adding, modifying, and testing plugins locally, and when you're ready to publish, use GitHub Desktop or another Git client to push your changes to your GitHub repo. Anyone consuming your repo and plugins will always get the latest code when they start FormIt.</p>
        </div>
    </div>

<div class="categoryBlock" id="PublishingPlugins">
    <h2 class="categoryTitle">Publishing a plugin</h2>
    <div class="categoryDetailBlock">
        <p class="categoryDetailBody">If you created the plugin with the <a href="#PluginPlayground">Plugin Playground</a>, you can publish your plugin with the bullhorn icon.</p>
        <img src="images/publish.png" alt="publish" />
    </div>
    <div class="categoryDetailBlock">
        <p class="categoryDetailBody">If you created the plugin without the <a href="#PluginPlayground">Plugin Playground</a>, you can publish your plugin by:</p>
        <ul class="categoryDetailList">
            <li>
                <p class="categoryDetailBody">Adding a <b>formit-plugin</b> topic to your plugin's repository</p>
                <img src="images/topic.png" alt="plugin topic" />
            </li>
            <li>
                <p class="categoryDetailBody">Enabling GitHub pages on your project. This can be found and set in the Setting tabs of your repository.</p>
                <p class="categoryDetailBody">Under the <b>GitHub Pages</b> section, choose the branch you want to use. Typically choose <b>master</b> or <b>main</b>.</p>
                <img src="images/pages.png" alt="install pages" />
            </li>
        </ul>
    </div>
    <div class="categoryDetailBlock">
        <p class="categoryDetailBody">If you'd like your plugin to appear under the list of recommended plugins in the Plugin Manager, add an additional topic to your repository, <b>formit-plugin-recommended</b>. The FormIt team will then review your plugin.</p>
    </div>
</div>

<div class="categoryBlock" id="PluginHelp">
    <h2 class="categoryTitle">Help With FormIt Plugins</h2>
    <div class="categoryDetailBlock">
        <p class="categoryDetailBody">Having issues building or running plugins? Reach out to us on the <a href="https://forums.autodesk.com/t5/formit-forum/bd-p/142">FormIt forums.</a></p>
</div>

</body></html>
